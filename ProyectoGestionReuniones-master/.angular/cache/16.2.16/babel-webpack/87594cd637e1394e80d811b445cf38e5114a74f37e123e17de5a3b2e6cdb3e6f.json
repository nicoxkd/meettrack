{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let ActasComponent = class ActasComponent {\n  constructor(actasService, route) {\n    this.actasService = actasService;\n    this.route = route;\n    this.meetings = [];\n    this.selectedMeeting = null;\n    this.loading = true;\n  }\n  ngOnInit() {\n    const dni = localStorage.getItem('dni');\n    const role = localStorage.getItem('role');\n    if (dni) {\n      const fetchObs = role === 'profesor' ? this.actasService.getActasProfesor(dni) : this.actasService.getActasAlumno(dni);\n      fetchObs.subscribe({\n        next: data => {\n          this.meetings = data.map(acta => {\n            let label = 'Reunión';\n            if (role === 'profesor') {\n              label = `Acta de ${acta.nombre_alumno || 'Alumno'} ${acta.apellidos_alumno || ''}`;\n            } else {\n              const nombreProf = acta.nombre_profesor ? `${acta.nombre_profesor} ${acta.apellidos_profesor}` : 'Profesor';\n              label = `Reunión con ${nombreProf}`;\n            }\n            return {\n              id: acta.id_acta,\n              id_reunion: acta.id_reunion,\n              date: acta.fecha_creacion,\n              subject: label,\n              detail: acta.contenido\n            };\n          });\n          // Lógica de Selección Inteligente\n          this.route.queryParams.subscribe(params => {\n            const targetIdReunion = params['idReunion'];\n            if (targetIdReunion) {\n              const found = this.meetings.find(m => m.id_reunion === targetIdReunion);\n              if (found) {\n                this.selectedMeeting = found;\n              } else if (this.meetings.length > 0) {\n                this.selectedMeeting = this.meetings[0];\n              }\n            } else if (this.meetings.length > 0) {\n              this.selectedMeeting = this.meetings[0];\n            }\n          });\n          this.loading = false;\n        },\n        error: err => {\n          console.error('Error al cargar actas', err);\n          this.loading = false;\n        }\n      });\n    } else {\n      this.loading = false;\n    }\n  }\n  selectMeeting(meeting) {\n    this.selectedMeeting = meeting;\n  }\n};\nActasComponent = __decorate([Component({\n  selector: 'app-actas',\n  templateUrl: './actas-pasadas.component.html',\n  styleUrls: ['./actas-pasadas.component.scss']\n})], ActasComponent);","map":{"version":3,"names":["Component","ActasComponent","constructor","actasService","route","meetings","selectedMeeting","loading","ngOnInit","dni","localStorage","getItem","role","fetchObs","getActasProfesor","getActasAlumno","subscribe","next","data","map","acta","label","nombre_alumno","apellidos_alumno","nombreProf","nombre_profesor","apellidos_profesor","id","id_acta","id_reunion","date","fecha_creacion","subject","detail","contenido","queryParams","params","targetIdReunion","found","find","m","length","error","err","console","selectMeeting","meeting","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\nicoc\\Downloads\\meetracks\\proyectoNuevo\\ProyectoGestionReuniones-master\\src\\app\\features\\actasPasadas\\actas-pasadas.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActasService } from './services/actas.service';\n\ninterface Meeting {\n  id: string;\n  id_reunion?: string;\n  date: string;\n  subject: string;\n  detail: string;\n}\n\n@Component({\n  selector: 'app-actas',\n  templateUrl: './actas-pasadas.component.html',\n  styleUrls: ['./actas-pasadas.component.scss']\n})\nexport class ActasComponent implements OnInit {\n  meetings: Meeting[] = [];\n  selectedMeeting: Meeting | null = null;\n  loading = true;\n\n  constructor(\n    private actasService: ActasService,\n    private route: import('@angular/router').ActivatedRoute\n  ) { }\n\n  ngOnInit() {\n    const dni = localStorage.getItem('dni');\n    const role = localStorage.getItem('role');\n\n    if (dni) {\n      const fetchObs = role === 'profesor'\n        ? this.actasService.getActasProfesor(dni)\n        : this.actasService.getActasAlumno(dni);\n\n      fetchObs.subscribe({\n        next: (data) => {\n          this.meetings = data.map((acta: any) => {\n            let label = 'Reunión';\n            if (role === 'profesor') {\n              label = `Acta de ${acta.nombre_alumno || 'Alumno'} ${acta.apellidos_alumno || ''}`;\n            } else {\n              const nombreProf = acta.nombre_profesor ? `${acta.nombre_profesor} ${acta.apellidos_profesor}` : 'Profesor';\n              label = `Reunión con ${nombreProf}`;\n            }\n\n            return {\n              id: acta.id_acta,\n              id_reunion: acta.id_reunion,\n              date: acta.fecha_creacion,\n              subject: label,\n              detail: acta.contenido\n            };\n          });\n\n          // Lógica de Selección Inteligente\n          this.route.queryParams.subscribe(params => {\n            const targetIdReunion = params['idReunion'];\n            if (targetIdReunion) {\n              const found = this.meetings.find(m => m.id_reunion === targetIdReunion);\n              if (found) {\n                this.selectedMeeting = found;\n              } else if (this.meetings.length > 0) {\n                this.selectedMeeting = this.meetings[0];\n              }\n            } else if (this.meetings.length > 0) {\n              this.selectedMeeting = this.meetings[0];\n            }\n          });\n\n          this.loading = false;\n        },\n        error: (err) => {\n          console.error('Error al cargar actas', err);\n          this.loading = false;\n        }\n      });\n    } else {\n      this.loading = false;\n    }\n  }\n\n  selectMeeting(meeting: Meeting) {\n    this.selectedMeeting = meeting;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}