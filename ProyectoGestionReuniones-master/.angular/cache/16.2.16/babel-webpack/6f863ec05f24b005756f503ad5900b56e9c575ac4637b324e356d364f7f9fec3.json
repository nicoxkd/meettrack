{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/features/reuniones/views/services/reuniones.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction DashboardAlumnoComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Cargando reuniones...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardAlumnoComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"No tienes reuniones programadas.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardAlumnoComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const reunion_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate4(\"\", i0.ɵɵpipeBind2(3, 4, reunion_r3.fecha, \"yyyy/MM/dd\"), \" a las \", reunion_r3.hora, \" con \", reunion_r3.nombre_profesor, \" \", reunion_r3.apellidos_profesor, \"\");\n  }\n}\nexport class DashboardAlumnoComponent {\n  constructor(reunionesService) {\n    this.reunionesService = reunionesService;\n    this.reuniones = [];\n    this.loading = true;\n  }\n  ngOnInit() {\n    const dni = localStorage.getItem('dni');\n    if (dni) {\n      this.reunionesService.getReunionesAlumno(dni).subscribe({\n        next: data => {\n          const now = new Date();\n          this.reuniones = data.map(r => {\n            const horaInicio = r.hora.split(' - ')[0];\n            const [horas, minutos] = horaInicio.split(':');\n            const fechaReunion = new Date(r.fecha);\n            if (horas && minutos) {\n              fechaReunion.setHours(parseInt(horas), parseInt(minutos), 0);\n            }\n            return {\n              ...r,\n              fullDate: fechaReunion\n            };\n          }).filter(reunion => {\n            // Solo mostrar si es futura (o ahora) Y no está finalizada\n            const esFutura = reunion.fullDate >= now;\n            const noFinalizada = reunion.estado !== 'finalizada';\n            return esFutura && noFinalizada;\n          }).sort((a, b) => a.fullDate.getTime() - b.fullDate.getTime());\n          this.loading = false;\n        },\n        error: err => {\n          console.error('Error al cargar reuniones', err);\n          this.loading = false;\n        }\n      });\n    } else {\n      this.loading = false;\n    }\n  }\n  static {\n    this.ɵfac = function DashboardAlumnoComponent_Factory(t) {\n      return new (t || DashboardAlumnoComponent)(i0.ɵɵdirectiveInject(i1.ReunionesService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardAlumnoComponent,\n      selectors: [[\"app-dashboard-alumno\"]],\n      decls: 23,\n      vars: 3,\n      consts: [[\"lang\", \"es\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [1, \"container\"], [1, \"action-panel\"], [\"routerLink\", \"/asignaturas\", 1, \"action-btn\"], [\"routerLink\", \"/reuniones\", 1, \"action-btn\"], [\"routerLink\", \"/actas\", 1, \"action-btn\"], [1, \"meetings-panel\"], [4, \"ngIf\"], [\"class\", \"meeting\", 4, \"ngFor\", \"ngForOf\"], [1, \"meeting\"]],\n      template: function DashboardAlumnoComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n          i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n          i0.ɵɵelementStart(4, \"title\");\n          i0.ɵɵtext(5, \"Portal de Reuniones\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"body\")(7, \"main\")(8, \"div\", 3)(9, \"aside\", 4)(10, \"button\", 5);\n          i0.ɵɵtext(11, \"Solicitar reuni\\u00F3n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"button\", 6);\n          i0.ɵɵtext(13, \"Ver reuniones\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"button\", 7);\n          i0.ɵɵtext(15, \"Consultar actas\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"section\", 8)(17, \"h2\");\n          i0.ɵɵtext(18, \"Pr\\u00F3ximas reuniones\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(19, DashboardAlumnoComponent_div_19_Template, 2, 0, \"div\", 9);\n          i0.ɵɵtemplate(20, DashboardAlumnoComponent_div_20_Template, 2, 0, \"div\", 9);\n          i0.ɵɵtemplate(21, DashboardAlumnoComponent_div_21_Template, 4, 7, \"div\", 10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(22, \"router-outlet\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(19);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.reuniones.length === 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.reuniones);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.RouterOutlet, i3.RouterLink, i2.DatePipe],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate4","ɵɵpipeBind2","reunion_r3","fecha","hora","nombre_profesor","apellidos_profesor","DashboardAlumnoComponent","constructor","reunionesService","reuniones","loading","ngOnInit","dni","localStorage","getItem","getReunionesAlumno","subscribe","next","data","now","Date","map","r","horaInicio","split","horas","minutos","fechaReunion","setHours","parseInt","fullDate","filter","reunion","esFutura","noFinalizada","estado","sort","a","b","getTime","error","err","console","ɵɵdirectiveInject","i1","ReunionesService","selectors","decls","vars","consts","template","DashboardAlumnoComponent_Template","rf","ctx","ɵɵelement","ɵɵtemplate","DashboardAlumnoComponent_div_19_Template","DashboardAlumnoComponent_div_20_Template","DashboardAlumnoComponent_div_21_Template","ɵɵproperty","length"],"sources":["C:\\Users\\nicoc\\Downloads\\meetracks\\meettrack\\ProyectoGestionReuniones-master\\src\\app\\features\\dashboard\\views\\dashboard-alumno\\dashboard-alumno.component.ts","C:\\Users\\nicoc\\Downloads\\meetracks\\meettrack\\ProyectoGestionReuniones-master\\src\\app\\features\\dashboard\\views\\dashboard-alumno\\dashboard-alumno.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ReunionesService } from 'src/app/features/reuniones/views/services/reuniones.service';\n\n@Component({\n  selector: 'app-dashboard-alumno',\n  templateUrl: './dashboard-alumno.component.html',\n  styleUrls: []\n})\nexport class DashboardAlumnoComponent {\n  reuniones: any[] = [];\n  loading = true;\n\n  constructor(private reunionesService: ReunionesService) { }\n\n  ngOnInit() {\n    const dni = localStorage.getItem('dni');\n    if (dni) {\n      this.reunionesService.getReunionesAlumno(dni).subscribe({\n        next: (data: any[]) => {\n          const now = new Date();\n\n          this.reuniones = data\n            .map(r => {\n              const horaInicio = r.hora.split(' - ')[0];\n              const [horas, minutos] = horaInicio.split(':');\n              const fechaReunion = new Date(r.fecha);\n              if (horas && minutos) {\n                fechaReunion.setHours(parseInt(horas), parseInt(minutos), 0);\n              }\n              return { ...r, fullDate: fechaReunion };\n            })\n            .filter(reunion => {\n              // Solo mostrar si es futura (o ahora) Y no está finalizada\n              const esFutura = reunion.fullDate >= now;\n              const noFinalizada = reunion.estado !== 'finalizada';\n              return esFutura && noFinalizada;\n            })\n            .sort((a, b) => a.fullDate.getTime() - b.fullDate.getTime());\n\n          this.loading = false;\n        },\n        error: (err) => {\n          console.error('Error al cargar reuniones', err);\n          this.loading = false;\n        }\n      });\n    } else {\n      this.loading = false;\n    }\n  }\n}\n","<!DOCTYPE html>\n<html lang=\"es\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Portal de Reuniones</title>\n</head>\n\n<body>\n    <main>\n        <div class=\"container\">\n            <aside class=\"action-panel\">\n                <button class=\"action-btn\" routerLink=\"/asignaturas\">Solicitar reunión</button>\n                <button class=\"action-btn\" routerLink=\"/reuniones\">Ver reuniones</button>\n                <button class=\"action-btn\" routerLink=\"/actas\">Consultar actas</button>\n            </aside>\n\n            <section class=\"meetings-panel\">\n                <h2>Próximas reuniones</h2>\n                <div *ngIf=\"loading\">Cargando reuniones...</div>\n                <div *ngIf=\"!loading && reuniones.length === 0\">No tienes reuniones programadas.</div>\n\n                <div class=\"meeting\" *ngFor=\"let reunion of reuniones\">\n                    <p>{{ reunion.fecha | date:'yyyy/MM/dd' }} a las {{ reunion.hora }} con {{ reunion.nombre_profesor\n                        }}\n                        {{ reunion.apellidos_profesor }}</p>\n                </div>\n            </section>\n        </div>\n\n        <router-outlet></router-outlet>\n\n    </main>\n\n</body>\n\n</html>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}